From 74c6f85c97dc345240fed34765243630a94df675 Mon Sep 17 00:00:00 2001
From: clayderhua <clayderhua@gmail.com>
Date: Thu, 18 Jan 2024 15:21:36 +0800
Subject: [PATCH] Add ROM5721 2G

---
 core/arch/arm/plat-imx/conf.mk | 8 +++++++-
 scripts/nxp_build.sh           | 1 +
 2 files changed, 8 insertions(+), 1 deletion(-)

diff --git a/core/arch/arm/plat-imx/conf.mk b/core/arch/arm/plat-imx/conf.mk
index 1d5081f96..dd9e5222f 100644
--- a/core/arch/arm/plat-imx/conf.mk
+++ b/core/arch/arm/plat-imx/conf.mk
@@ -64,7 +64,8 @@ mx8mq-flavorlist = \
 
 mx8mm-flavorlist = \
 	mx8mmevk \
-	mx8mm_cl_iot_gate
+	mx8mm_cl_iot_gate \
+	mx8mmrsb3730a2
 
 mx8mn-flavorlist = \
 	mx8mnevk
@@ -388,6 +389,11 @@ CFG_NSEC_DDR_1_BASE ?= 0x80000000UL
 CFG_NSEC_DDR_1_SIZE ?= 0x40000000UL
 endif
 
+ifneq (,$(filter $(PLATFORM_FLAVOR),mx8mmrsb3730a2))
+CFG_DDR_SIZE ?= 0x100000000
+CFG_TZDRAM_START ?= 0xBE000000
+CFG_UART_BASE ?= UART2_BASE
+$(call force,CFG_CORE_LARGE_PHYS_ADDR,y)
+$(call force,CFG_CORE_ARM64_PA_BITS,36)
+endif
+
 ifneq (,$(filter $(PLATFORM_FLAVOR),mx8mnevk))
 CFG_DDR_SIZE ?= 0x80000000
 CFG_UART_BASE ?= UART2_BASE
diff --git a/scripts/nxp_build.sh b/scripts/nxp_build.sh
index 73b60fbde..479c5b62c 100755
--- a/scripts/nxp_build.sh
+++ b/scripts/nxp_build.sh
@@ -35,6 +35,7 @@ boards_list=(
 	imx-mx8dxmek \
 	imx-mx8mqevk \
 	imx-mx8mmevk \
+	imx-mx8mmrsb3730a2 \
 	imx-mx8mnevk \
 	imx-mx8mpevk \
 	imx-mx8qxpmek \
-- 
2.38.1

